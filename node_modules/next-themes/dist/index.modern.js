import e,{createContext as t,useContext as n,useState as r,useCallback as o,useEffect as a,memo as i}from"react";import m from"next/head";var s=t({setTheme:function(e){},themes:[]}),c=function(){return n(s)},d=function(t){var n=t.forcedTheme,i=t.disableTransitionOnChange,m=void 0!==i&&i,c=t.enableSystem,d=void 0===c||c,h=t.storageKey,v=void 0===h?"theme":h,y=t.themes,g=void 0===y?["light","dark"]:y,p=t.defaultTheme,T=void 0===p?"light":p,S=t.attribute,w=void 0===S?"data-theme":S,b=t.value,k=t.children,x=r(function(){return l(v)}),E=x[0],L=x[1],I=r(function(){return l(v)}),_=I[0],C=I[1],M=b?Object.values(b):g,O=o(function(e,t){void 0===t&&(t=!0);var n=(null==b?void 0:b[e])||e,r=m?f():null;t&&localStorage.setItem(v,e);var o,a=document.documentElement;"class"===w?((o=a.classList).remove.apply(o,M),a.classList.add(n)):a.setAttribute(w,n),null==r||r()},[]),H=o(function(e){var t=e.matches?"dark":"light";C(t),"system"===E&&O(t,!1)},[E]);a(function(){if(d){var e=window.matchMedia("(prefers-color-scheme: dark)");return e.addListener(H),H(e),function(){return e.removeListener(H)}}},[H]);var K=o(function(e){n||(O(e),L(e))},[]);return a(function(){var e=function(e){e.key===v&&K(e.newValue)};return window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}},[]),e.createElement(s.Provider,{value:{theme:E,setTheme:K,forcedTheme:n,resolvedTheme:"system"===E?_:E,themes:d?[].concat(g,["system"]):g,systemTheme:d?_:void 0}},e.createElement(u,{forcedTheme:n,storageKey:v,attribute:w,value:b,enableSystem:d,defaultTheme:T,attrs:M}),k)},u=i(function(t){var n=t.forcedTheme,r=t.storageKey,o=t.attribute,a=t.enableSystem,i=t.defaultTheme,s=t.value,c="class"===o?"var d=document.documentElement.classList;d.remove("+t.attrs.map(function(e){return"'"+e+"'"}).join(",")+");":"var d=document.documentElement;",d=function(e,t){e=(null==s?void 0:s[e])||e;var n=t?e:"'"+e+"'";return"class"===o?"d.add("+n+")":"d.setAttribute('"+o+"', "+n+")"};return e.createElement(m,null,e.createElement("script",n?{key:"next-themes-script",dangerouslySetInnerHTML:{__html:"!function(){"+d(n)+"}()"}}:a?{key:"next-themes-script",dangerouslySetInnerHTML:{__html:"!function(){try {"+c+"var e=localStorage.getItem('"+r+"');if(!e)return localStorage.setItem('"+r+"','"+i+"'),"+d(i)+';if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?'+d("dark")+":"+d("light")+"}else "+(s?"var x="+JSON.stringify(s)+";":"")+d(s?"x[e]":"e",!0)+"}catch(e){}}()"}}:{key:"next-themes-script",dangerouslySetInnerHTML:{__html:"!function(){try{"+c+'var t=localStorage.getItem("'+r+'");if(!t)return localStorage.setItem("'+r+'","'+i+'"),'+d(i)+";"+(s?"var x="+JSON.stringify(s)+";":"")+d(s?"x[t]":"t",!0)+"}catch(t){}}();"}}))},function(e,t){return e.forcedTheme===t.forcedTheme}),l=function(e){if("undefined"!=typeof window)return localStorage.getItem(e)||void 0},f=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),function(){window.getComputedStyle(e),document.head.removeChild(e)}};export{d as ThemeProvider,c as useTheme};
